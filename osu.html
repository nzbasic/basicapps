<!DOCTYPE HTML>
<html>
<head>
<script>
window.onload = function() {

var ppPoints = [];
var rankPoints = [];
var accPoints = [];
var playPoints = [];
var countryPoints = [];

var ppChart = new CanvasJS.Chart("ppContainer", {
	animationEnabled: true,
	theme: "light2",
	title: {
		text: "Performance Tracker"
	},
	axisY: {
		title: "pp",
        titleFontSize: 24,
        includeZero: false
	},
	data: [{
		type: "line",
		yValueFormatString: "#### pp",
		dataPoints: ppPoints
	}]
});

var rankChart = new CanvasJS.Chart("rankContainer", {
	animationEnabled: true,
	theme: "light2",
	title: {
		text: "Rank Tracker"
	},
	axisY: {
		title: "Rank",
        titleFontSize: 24,
        includeZero: false
	},
	data: [{
		type: "line",
		yValueFormatString: "#####",
		dataPoints: rankPoints
	}]
});

var accChart = new CanvasJS.Chart("accContainer", {
	animationEnabled: true,
	theme: "light2",
	title: {
		text: "Accuracy Tracker"
	},
	axisY: {
		title: "Acc",
        titleFontSize: 24,
        includeZero: false
	},
	data: [{
        type: "line",
        yValueFormatString: "## ##%",
		dataPoints: accPoints
	}]
});

var countryChart = new CanvasJS.Chart("countryContainer", {
	animationEnabled: true,
	theme: "light2",
	title: {
		text: "NZ Rank Tracker"
	},
	axisY: {
		title: "NZ Rank",
        titleFontSize: 24,
        includeZero: false
	},
	data: [{
		type: "line",
		yValueFormatString: "###",
		dataPoints: countryPoints
	}]
});

var playChart = new CanvasJS.Chart("playContainer", {
	animationEnabled: true,
	theme: "light2",
	title: {
		text: "Playcount Tracker"
	},
	axisY: {
		title: "Playcount",
        titleFontSize: 24,
        includeZero: false
	},
	data: [{
		type: "line",
		yValueFormatString: "###### plays",
		dataPoints: playPoints
	}]
});

function addData(data) {
	for (var i = 0; i < data.table.length; i++) {
		ppPoints.push({
			x: new Date(data.table[i].date),
			y: parseInt(data.table[i].pp)
        });
        rankPoints.push({
			x: new Date(data.table[i].date),
			y: parseInt(data.table[i].rank)
        });
        accPoints.push({
			x: new Date(data.table[i].date),
			y: parseFloat(data.table[i].acc)
        });
        countryPoints.push({
			x: new Date(data.table[i].date),
			y: parseInt(data.table[i].country)
        });
        playPoints.push({
			x: new Date(data.table[i].date),
			y: parseInt(data.table[i].plays)
        });
        
	}
    ppChart.render();
    accChart.render();
    countryChart.render();
    playChart.render();
    rankChart.render();
}

$.getJSON("http://basicapps.net/rank.json", addData);

}
</script>
</head>
<body>
<div id="ppContainer" style="height: 300px; width: 100%;"></div>
<div id="rankContainer" style="height: 300px; width: 100%;"></div>
<div id="countryContainer" style="height: 300px; width: 100%;"></div>
<div id="playContainer" style="height: 300px; width: 100%;"></div>
<div id="accContainer" style="height: 300px; width: 100%;"></div>
<script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<title>osu!Tracker</title>
</body>
</html>